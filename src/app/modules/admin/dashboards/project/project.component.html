<div class="flex min-w-0 flex-auto flex-col">
  <!-- Header -->
  <div class="bg-card">
    <div class="mx-auto flex w-full max-w-screen-xl flex-col px-6 sm:px-8">
      <div class="my-8 flex min-w-0 flex-auto flex-col sm:my-12 sm:flex-row sm:items-center">
        <!-- Avatar and name -->
        <div class="flex min-w-0 flex-auto items-center">
          <div class="h-16 w-16 flex-0 overflow-hidden rounded-full">
            <img [src]="photoUrl" />
          </div>
          <div class="ml-4 flex min-w-0 flex-col">
            <ng-container *transloco="let t">
              <div
                class="truncate text-2xl font-semibold leading-7 tracking-tight md:text-5xl md:leading-snug"
              >
                <ng-container *transloco="let t"> Bienvenido, </ng-container>
                <span class="font-semibold"> {{ (user$ | async)?.name?.split(' ')[0] }}! </span>
              </div>
            </ng-container>

            <!-- üî• IMSS estilo badge (Dark mode mejorado) -->
            <div
              class="mt-2 inline-flex items-center gap-2 rounded-lg bg-blue-50 px-3 py-1.5 dark:bg-blue-950/40 dark:ring-1 dark:ring-blue-800/50"
              *ngIf="(user$ | async)?.IMSS as IMSS"
            >
              <mat-icon
                class="text-blue-600 icon-size-4 dark:text-blue-400"
                [svgIcon]="'heroicons_outline:identification'"
              >
              </mat-icon>

              <div class="flex items-center gap-1.5">
                <span class="text-base font-medium text-blue-700 dark:text-blue-300">NSS</span>
                <span
                  class="font-mono text-base font-bold tracking-wide text-blue-900 dark:text-blue-50"
                >
                  {{ IMSS }}
                </span>
              </div>
            </div>
          </div>
        </div>
        <!-- Actions -->
      </div>
      <!-- Project selector -->
    </div>
  </div>

  <!-- new Header -->
  <!-- <div class="w-full">
  <div class="relative h-32 bg-gradient-to-r from-indigo-500 via-purple-500 to-purple-600 sm:h-40">
    <div class="mx-auto flex w-full max-w-screen-xl px-6 sm:px-8">
      <div class="absolute bottom-0 left-6 translate-y-1/2 sm:left-8">
        <div class="relative">
          <img
            [src]="photoUrl"
            alt="User Avatar"
            class="h-20 w-20 rounded-full border-4 border-white object-cover shadow-lg sm:h-24 sm:w-24"
          />
          <div class="absolute bottom-0 right-0 rounded bg-indigo-700 px-1.5 py-0.5 text-xs text-white sm:px-2 sm:py-1">
            Profile
          </div>
        </div>
      </div>
      <div class="absolute bottom-4 left-28 sm:bottom-6 sm:left-36">
        <h1 class="text-2xl font-bold text-white sm:text-3xl">
          {{ (user$ | async)?.name }}
        </h1>
      </div>
    </div>
  </div>
  
  <div class="bg-card shadow-lg dark:bg-gray-900">
    <div class="mx-auto w-full max-w-screen-xl px-6 py-4 pt-14 sm:px-8 sm:pt-16">
      <div class="flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between">
        <div class="flex-1">
          <p class="mb-3 text-sm text-gray-600 dark:text-gray-400 sm:text-base">
            &#64;{{ (user$ | async)?.email?.split('@')[0] }} ‚Ä¢ {{ (user$ | async)?.role || 'Usuario' }}
          </p>
          <div
            class="mb-3 inline-flex items-center gap-2 rounded-lg bg-blue-50 px-3 py-1.5 dark:bg-blue-950/40 dark:ring-1 dark:ring-blue-800/50"
            *ngIf="(user$ | async)?.IMSS as IMSS"
          >
            <mat-icon
              class="icon-size-4 text-blue-600 dark:text-blue-400"
              [svgIcon]="'heroicons_outline:identification'"
            >
            </mat-icon>
            <div class="flex items-center gap-1.5">
              <span class="text-sm font-medium text-blue-700 dark:text-blue-300">NSS</span>
              <span class="font-mono text-sm font-bold tracking-wide text-blue-900 dark:text-blue-50">
                {{ IMSS }}
              </span>
            </div>
          </div>
          <p class="mb-4 max-w-3xl text-sm text-gray-700 dark:text-gray-300 sm:text-base">
            {{ (user$ | async)?.bio || 'Apasionado por el desarrollo y la tecnolog√≠a. Siempre aprendiendo cosas nuevas y ayudando a otros a alcanzar sus metas.' }}
          </p>
          <div class="mb-4 flex flex-wrap gap-2">
            <span class="cursor-pointer rounded-full border border-gray-300 bg-white px-3 py-1.5 text-xs text-gray-700 transition hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 sm:text-sm">
              Desarrollo
            </span>
            <span class="cursor-pointer rounded-full border border-gray-300 bg-white px-3 py-1.5 text-xs text-gray-700 transition hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 sm:text-sm">
              Tecnolog√≠a
            </span>
            <span class="cursor-pointer rounded-full border border-gray-300 bg-white px-3 py-1.5 text-xs text-gray-700 transition hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 sm:text-sm">
              Innovaci√≥n
            </span>
          </div>
        </div>

        <div class="flex flex-col gap-4">
          <div class="flex gap-2">
            <button class="flex items-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm text-white transition hover:bg-indigo-700 sm:px-6">
              <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:envelope'"></mat-icon>
              Mensaje
            </button>
            <button class="flex items-center gap-2 rounded-lg border-2 border-indigo-600 bg-white px-4 py-2 text-sm text-indigo-600 transition hover:bg-indigo-50 dark:bg-gray-800 dark:hover:bg-gray-700 sm:px-6">
              <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:user-plus'"></mat-icon>
              Seguir
            </button>
          </div>

          <div class="space-y-2 text-xs text-gray-600 dark:text-gray-400 sm:text-sm">
            <div class="flex items-start gap-2" *ngIf="(user$ | async)?.location">
              <mat-icon class="icon-size-4 mt-0.5 text-gray-400" [svgIcon]="'heroicons_outline:map-pin'"></mat-icon>
              <span>{{ (user$ | async)?.location }}</span>
            </div>
            <div class="flex items-start gap-2" *ngIf="(user$ | async)?.createdAt">
              <mat-icon class="icon-size-4 mt-0.5 text-gray-400" [svgIcon]="'heroicons_outline:calendar'"></mat-icon>
              <span>Miembro desde {{ (user$ | async)?.createdAt | date:'MMMM yyyy' }}</span>
            </div>
            <div class="flex items-start gap-2" *ngIf="(user$ | async)?.website">
              <mat-icon class="icon-size-4 mt-0.5 text-gray-400" [svgIcon]="'heroicons_outline:link'"></mat-icon>
              <a [href]="(user$ | async)?.website" target="_blank" class="text-indigo-600 hover:underline dark:text-indigo-400">
                {{ (user$ | async)?.website }}
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->

  <!-- ALL USERS -->
  <div class="-mt-px flex-auto border-t pt-4 sm:pt-6" *ngIf="isAllUsers">
    <div class="mx-auto w-full max-w-screen-xl">
      <!-- Tabs -->
      <mat-tab-group class="sm:px-2" mat-stretch-tabs="false" [animationDuration]="'0'">
        <!-- Asistencias -->
        <mat-tab label="Asistencias">
          <ng-template matTabContent>
            <!-- Header con t√≠tulo -->
            <div class="mb-6">
              <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100">
                Control de asistencias
              </h2>
              <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                Visualiza tu historial de entradas, salidas y registro
              </p>
            </div>

            <!-- Cards de resumen -->
            <div class="mb-6 grid w-full min-w-0 grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
              <!-- Total Asistencias -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon
                    class="text-green-500"
                    svgIcon="heroicons_outline:check-circle"
                  ></mat-icon>
                  <span
                    class="rounded-full bg-green-100 px-2 py-1 text-base font-medium text-green-600 dark:bg-green-900/20"
                  >
                    Total
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-green-500">
                    {{ totalAsistencias }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    Asistencias
                  </div>
                </div>
              </div>

              <!-- Retardos -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon class="text-amber-500" svgIcon="heroicons_outline:clock"></mat-icon>
                  <span
                    class="rounded-full bg-amber-100 px-2 py-1 text-base font-medium text-amber-600 dark:bg-amber-900/20"
                  >
                    Total
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-amber-500">
                    {{ totalRetardos }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    Retardos
                  </div>
                </div>
              </div>

              <!-- Faltas -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon class="text-red-500" svgIcon="heroicons_outline:x-circle"></mat-icon>
                  <span
                    class="rounded-full bg-red-100 px-2 py-1 text-base font-medium text-red-600 dark:bg-red-900/20"
                  >
                    Total
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-red-500">
                    {{ totalFaltas }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    Faltas
                  </div>
                </div>
              </div>

              <!-- Horas trabajadas -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon class="text-blue-500" svgIcon="heroicons_outline:clock"></mat-icon>
                  <span
                    class="rounded-full bg-blue-100 px-2 py-1 text-base font-medium text-blue-600 dark:bg-blue-900/20"
                  >
                    Total
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-blue-500">
                    {{ horasTrabajadas }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    Horas trabajadas
                  </div>
                </div>
              </div>
            </div>

            <!-- Gr√°fica y Listado -->
            <div class="flex flex-col gap-6 lg:flex-row">
              <!-- Gr√°fica de asistencias -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow lg:w-1/2"
              >
                <div
                  class="mb-4 flex flex-col items-start justify-between sm:flex-row sm:items-center"
                >
                  <div class="flex items-center space-x-3">
                    <mat-icon class="text-primary" svgIcon="heroicons_outline:chart-bar"></mat-icon>
                    <div class="text-lg font-medium leading-6 tracking-tight">
                      Historial de Asistencias
                    </div>
                  </div>
                  <div class="mt-3 sm:ml-2 sm:mt-0">
                    <mat-button-toggle-group value="semana" #periodoSelector="matButtonToggleGroup">
                      <mat-button-toggle value="semana">Esta semana</mat-button-toggle>
                      <mat-button-toggle value="mes">Este mes</mat-button-toggle>
                      <mat-button-toggle value="anio">Este a√±o</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                </div>
                <div class="mt-2 flex flex-auto flex-col">
                  @if (
                    chartAsistenciasSeries[periodoSelector.value] &&
                    hasChartData(periodoSelector.value)
                  ) {
                    <apx-chart
                      class="h-80 w-full flex-auto"
                      [chart]="chartAsistencias.chart"
                      [series]="chartAsistenciasSeries[periodoSelector.value]"
                      [xaxis]="getXaxisForPeriod(periodoSelector.value)"
                      [yaxis]="chartAsistencias.yaxis"
                      [colors]="chartAsistencias.colors"
                      [plotOptions]="chartAsistencias.plotOptions"
                      [dataLabels]="chartAsistencias.dataLabels"
                      [stroke]="chartAsistencias.stroke"
                      [legend]="chartAsistencias.legend"
                      [tooltip]="chartAsistencias.tooltip"
                    >
                    </apx-chart>
                  } @else {
                    <div class="flex h-80 flex-col items-center justify-center">
                      <mat-icon
                        class="text-gray-400 icon-size-16"
                        svgIcon="heroicons_outline:chart-bar"
                      ></mat-icon>
                      <p class="mt-4 text-sm text-gray-600 dark:text-gray-400">
                        No hay suficientes datos de asistencias para mostrar
                      </p>
                      <p class="mt-2 text-xs text-gray-500 dark:text-gray-500">
                        Se necesitan al menos 2 registros para generar la gr√°fica
                      </p>
                    </div>
                  }
                </div>
              </div>

              <!-- √öltimas asistencias registradas -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow lg:w-1/2"
              >
                <div class="mb-4 flex items-center space-x-3">
                  <mat-icon class="text-primary" svgIcon="heroicons_outline:calendar"></mat-icon>
                  <div class="text-lg font-medium leading-6 tracking-tight">
                    Registros Recientes
                  </div>
                </div>
                <div class="mt-2 flex max-h-96 flex-col divide-y overflow-y-auto">
                  @if (user$ | async; as user) {
                    @if (user.asistencias && user.asistencias.length > 0) {
                      @for (asistencia of asistenciasOrdenadas; track asistencia.id) {
                        <div
                          class="flex flex-row items-center justify-between rounded-lg px-2 py-4 transition-colors hover:bg-gray-50 dark:hover:bg-gray-800/50"
                        >
                          <div class="flex items-center space-x-4">
                            <!-- Indicador visual -->
                            <div
                              class="flex h-10 w-10 items-center justify-center rounded-full"
                              [ngClass]="{
                                'bg-green-100 dark:bg-green-900/20': !isRetardoUI(asistencia),
                                'bg-amber-100 dark:bg-amber-900/20': isRetardoUI(asistencia),
                              }"
                            >
                              <mat-icon
                                [ngClass]="{
                                  'text-green-600': !isRetardoUI(asistencia),
                                  'text-amber-600': isRetardoUI(asistencia),
                                }"
                                [svgIcon]="
                                  isRetardoUI(asistencia)
                                    ? 'heroicons_outline:clock'
                                    : 'heroicons_outline:check-circle'
                                "
                              >
                              </mat-icon>
                            </div>

                            <div class="flex flex-col">
                              <div class="font-medium text-gray-900 dark:text-gray-100">
                                {{ asistencia.fecha }}
                              </div>
                              <div class="mt-1 flex items-center space-x-3">
                                <div
                                  class="flex items-center text-sm text-gray-600 dark:text-gray-400"
                                >
                                  <mat-icon
                                    class="mr-1 icon-size-4"
                                    svgIcon="heroicons_mini:arrow-right-on-rectangle"
                                  ></mat-icon>
                                  {{ asistencia.hora_entrada }}
                                </div>
                                <div class="flex items-center text-sm">
                                  <mat-icon
                                    class="mr-1 icon-size-4"
                                    svgIcon="heroicons_mini:arrow-left-on-rectangle"
                                  ></mat-icon>

                                  @if (!asistencia.hora_salida) {
                                    <span
                                      class="font-semibold text-yellow-600 dark:text-yellow-400"
                                    >
                                      En turno ‚è≥
                                    </span>
                                  } @else {
                                    <span class="text-gray-600 dark:text-gray-400">
                                      {{ asistencia.hora_salida }}
                                    </span>
                                  }
                                </div>
                              </div>

                              @if (asistencia.turno) {
                                <div
                                  class="mt-1 flex items-center text-xs text-gray-500 dark:text-gray-500"
                                >
                                  <mat-icon
                                    class="mr-1 icon-size-3"
                                    svgIcon="heroicons_mini:sun"
                                  ></mat-icon>
                                  {{ asistencia.turno.nombre }} ({{
                                    asistencia.turno.hora_inicio
                                  }}
                                  - {{ asistencia.turno.hora_fin }})
                                </div>
                              }
                            </div>
                          </div>

                          <!-- Badge de estado -->
                          <div>
                            @if (isRetardoUI(asistencia)) {
                              <span
                                class="inline-flex items-center rounded-full bg-amber-100 px-2.5 py-0.5 text-xs font-medium text-amber-800 dark:bg-amber-900/20 dark:text-amber-400"
                              >
                                Retardo
                              </span>
                            } @else {
                              <span
                                class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800 dark:bg-green-900/20 dark:text-green-400"
                              >
                                A tiempo
                              </span>
                            }
                          </div>
                        </div>
                      }
                    } @else {
                      <div class="flex flex-col items-center justify-center py-12">
                        <mat-icon
                          class="text-gray-400 icon-size-16"
                          svgIcon="heroicons_outline:calendar"
                        ></mat-icon>
                        <p class="mt-4 text-sm text-gray-600 dark:text-gray-400">
                          No hay registros de asistencia
                        </p>
                      </div>
                    }
                  }
                </div>
              </div>
            </div>
          </ng-template>
        </mat-tab>

        <!-- Vacaciones -->
        <mat-tab label="Vacaciones">
          <ng-template matTabContent>
            <!-- Header con t√≠tulo -->
            <div class="mb-6">
              <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100">
                Gesti√≥n de vacaciones
              </h2>
              <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                Administra tus d√≠as de vacaciones, solicitudes y historial
              </p>
            </div>

            <!-- Cards de resumen -->
            <div class="mb-6 grid w-full min-w-0 grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
              <!-- Total Vacaciones -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon class="text-blue-500" svgIcon="heroicons_outline:calendar"></mat-icon>
                  <span
                    class="rounded-full bg-blue-100 px-2 py-1 text-base font-medium text-blue-600 dark:bg-blue-900/20"
                  >
                    Total
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-blue-500">
                    {{ vacacionesTotales }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    D√≠as totales
                  </div>
                </div>
              </div>

              <!-- Disponibles -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon
                    class="text-green-500"
                    svgIcon="heroicons_outline:check-circle"
                  ></mat-icon>
                  <span
                    class="rounded-full bg-green-100 px-2 py-1 text-base font-medium text-green-600 dark:bg-green-900/20"
                  >
                    Disponibles
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-green-500">
                    {{ vacacionesDisponibles }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    D√≠as libres
                  </div>
                </div>
              </div>

              <!-- Disfrutadas -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon class="text-amber-500" svgIcon="heroicons_outline:sun"></mat-icon>
                  <span
                    class="rounded-full bg-amber-100 px-2 py-1 text-base font-medium text-amber-600 dark:bg-amber-900/20"
                  >
                    Usados
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-amber-500">
                    {{ vacacionesDisfrutadas }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    Disfrutadas
                  </div>
                </div>
              </div>

              <!-- Solicitudes -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow transition-shadow hover:shadow-lg"
              >
                <div class="mb-4 flex items-center justify-between">
                  <mat-icon
                    class="text-purple-500"
                    svgIcon="heroicons_outline:document-text"
                  ></mat-icon>
                  <span
                    class="rounded-full bg-purple-100 px-2 py-1 text-base font-medium text-purple-600 dark:bg-purple-900/20"
                  >
                    Solicitudes
                  </span>
                </div>
                <div class="mt-4 flex flex-col items-center justify-center">
                  <div class="text-7xl font-bold leading-none tracking-tight text-purple-500">
                    {{ solicitudesVacaciones }}
                  </div>
                  <div class="mt-2 text-base font-medium text-gray-600 dark:text-gray-400">
                    Pendientes
                  </div>
                </div>
              </div>
            </div>

            <!-- Gr√°fica y Listado -->
            <div class="flex flex-col gap-6 lg:flex-row">
              <!-- Gr√°fica de vacaciones -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow lg:w-1/2"
              >
                <div
                  class="mb-4 flex flex-col items-start justify-between sm:flex-row sm:items-center"
                >
                  <div class="flex items-center space-x-3">
                    <mat-icon class="text-primary" svgIcon="heroicons_outline:chart-pie"></mat-icon>
                    <div class="text-lg font-medium leading-6 tracking-tight">
                      Distribuci√≥n de Vacaciones
                    </div>
                  </div>
                  <div class="mt-3 sm:ml-2 sm:mt-0">
                    <mat-button-toggle-group
                      value="actual"
                      #periodoVacaciones="matButtonToggleGroup"
                    >
                      <mat-button-toggle value="actual">A√±o actual</mat-button-toggle>
                      <mat-button-toggle value="anterior">A√±o anterior</mat-button-toggle>
                      <mat-button-toggle value="historico">Hist√≥rico</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                </div>
                <div class="mt-2 flex flex-auto flex-col">
                  @if (
                    chartVacacionesSeries[periodoVacaciones.value] &&
                    hasVacacionesChartData(periodoVacaciones.value)
                  ) {
                    <apx-chart
                      class="h-80 w-full flex-auto"
                      [chart]="chartVacaciones.chart"
                      [series]="chartVacacionesSeries[periodoVacaciones.value]"
                      [labels]="chartVacaciones.labels"
                      [colors]="chartVacaciones.colors"
                      [legend]="chartVacaciones.legend"
                      [dataLabels]="chartVacaciones.dataLabels"
                      [tooltip]="chartVacaciones.tooltip"
                    >
                    </apx-chart>
                  } @else {
                    <div class="flex h-80 flex-col items-center justify-center">
                      <mat-icon
                        class="text-gray-400 icon-size-16"
                        svgIcon="heroicons_outline:chart-pie"
                      ></mat-icon>
                      <p class="mt-4 text-sm text-gray-600 dark:text-gray-400">
                        No hay datos de vacaciones para mostrar
                      </p>
                      <p class="mt-2 text-xs text-gray-500 dark:text-gray-500">
                        Se necesitan registros para generar la gr√°fica
                      </p>
                    </div>
                  }
                </div>
              </div>

              <!-- √öltimas solicitudes de vacaciones -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow lg:w-1/2"
              >
                <div class="mb-4 flex items-center justify-between">
                  <div class="flex items-center space-x-3">
                    <mat-icon
                      class="text-primary"
                      svgIcon="heroicons_outline:document-text"
                    ></mat-icon>
                    <div class="text-lg font-medium leading-6 tracking-tight">
                      Solicitudes Recientes
                    </div>
                  </div>
                  <button
                    mat-icon-button
                    color="primary"
                    matTooltip="Solicitar vacaciones"
                    (click)="abrirSolicitudVacaciones()"
                  >
                    <mat-icon svgIcon="heroicons_outline:plus"></mat-icon>
                  </button>
                </div>
                <div class="mt-2 flex max-h-96 flex-col divide-y overflow-y-auto">
                  <div *ngIf="user$ | async as user">
                    <ng-container *ngIf="solicitudesOrdenadas?.length > 0; else noSolicitudes">
                      <div
                        *ngFor="let solicitud of solicitudesOrdenadas; trackBy: trackByFn"
                        class="flex flex-row items-center justify-between rounded-lg px-2 py-4 transition-colors hover:bg-gray-50 dark:hover:bg-gray-800/50"
                      >
                        <!-- Contenido de cada solicitud -->
                        <div class="flex items-center space-x-4">
                          <div
                            class="flex h-10 w-10 items-center justify-center rounded-full"
                            [ngClass]="{
                              'bg-green-100 dark:bg-green-900/20':
                                solicitud.status_id === 'aprobada',
                              'bg-amber-100 dark:bg-amber-900/20':
                                solicitud.status_id === 'pendiente',
                              'bg-red-100 dark:bg-red-900/20': solicitud.status_id === 'rechazada',
                            }"
                          >
                            <mat-icon
                              [ngClass]="{
                                'text-green-600': solicitud.status_id === 'aprobada',
                                'text-amber-600': solicitud.status_id === 'pendiente',
                                'text-red-600': solicitud.status_id === 'rechazada',
                              }"
                              [svgIcon]="getEstadoIcon(solicitud.estado)"
                            >
                            </mat-icon>
                          </div>
                          <div class="flex flex-col">
                            <div class="font-medium text-gray-900 dark:text-gray-100">
                              {{ solicitud.fecha_inicio }} - {{ solicitud.fecha_fin }}
                            </div>
                            <div class="mt-1 flex items-center space-x-3">
                              <div
                                class="flex items-center text-sm text-gray-600 dark:text-gray-400"
                              >
                                <mat-icon
                                  class="mr-1 icon-size-4"
                                  svgIcon="heroicons_mini:calendar-days"
                                ></mat-icon>
                                {{ solicitud.dias_solicitados }} d√≠as
                              </div>
                              <div
                                class="flex items-center text-sm text-gray-600 dark:text-gray-400"
                              >
                                <mat-icon
                                  class="mr-1 icon-size-4"
                                  svgIcon="heroicons_mini:clock"
                                ></mat-icon>
                                {{ solicitud.fecha_solicitud }}
                              </div>
                            </div>
                            <div
                              *ngIf="solicitud.motivo"
                              class="mt-1 flex items-center text-xs text-gray-500 dark:text-gray-500"
                            >
                              <mat-icon
                                class="mr-1 icon-size-3"
                                svgIcon="heroicons_mini:document-text"
                              ></mat-icon>
                              {{ solicitud.motivo }}
                            </div>
                          </div>
                        </div>

                        <div>
                          <span
                            *ngIf="solicitud.estado === 'aprobada'"
                            class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800 dark:bg-green-900/20 dark:text-green-400"
                          >
                            Aprobada
                          </span>
                          <span
                            *ngIf="solicitud.estado === 'pendiente'"
                            class="inline-flex items-center rounded-full bg-amber-100 px-2.5 py-0.5 text-xs font-medium text-amber-800 dark:bg-amber-900/20 dark:text-amber-400"
                          >
                            Pendiente
                          </span>
                          <span
                            *ngIf="solicitud.estado === 'rechazada'"
                            class="inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900/20 dark:text-red-400"
                          >
                            Rechazada
                          </span>
                        </div>
                      </div>
                    </ng-container>

                    <ng-template #noSolicitudes>
                      <div class="flex flex-col items-center justify-center py-12">
                        <mat-icon
                          class="text-gray-400 icon-size-16"
                          svgIcon="heroicons_outline:document-text"
                        ></mat-icon>
                        <p class="mt-4 text-sm text-gray-600 dark:text-gray-400">
                          No hay solicitudes de vacaciones
                        </p>
                        <p class="mt-2 text-xs text-gray-500 dark:text-gray-500">
                          Crea una nueva solicitud para comenzar
                        </p>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
        </mat-tab>

        <!-- Inicio -->
        <mat-tab label="Inicio">
          <ng-template matTabContent>
            <div class="grid w-full min-w-0 grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-4">
              <!-- Github issues summary -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow sm:col-span-2 md:col-span-4"
              >
                <div class="flex flex-col items-start justify-between sm:flex-row">
                  <div class="truncate text-lg font-medium leading-6 tracking-tight">
                    Resumen de problemas de GitHub
                  </div>
                  <div class="mt-3 sm:ml-2 sm:mt-0">
                    <mat-button-toggle-group
                      value="this-week"
                      #githubIssuesWeekSelector="matButtonToggleGroup"
                    >
                      <mat-button-toggle value="last-week">Semana pasada</mat-button-toggle>
                      <mat-button-toggle value="this-week">Esta semana</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                </div>
                <div
                  class="mt-8 grid w-full grid-flow-row grid-cols-1 gap-6 sm:mt-4 lg:grid-cols-2"
                >
                  <!-- Nuevos vs. Cerrados
 -->
                  <div class="flex flex-auto flex-col">
                    <div class="text-secondary font-medium">Nuevos vs. Cerrados</div>
                    <div class="flex flex-auto flex-col">
                      <apx-chart
                        class="h-80 w-full flex-auto"
                        [chart]="chartGithubIssues.chart"
                        [colors]="chartGithubIssues.colors"
                        [dataLabels]="chartGithubIssues.dataLabels"
                        [grid]="chartGithubIssues.grid"
                        [labels]="chartGithubIssues.labels"
                        [legend]="chartGithubIssues.legend"
                        [plotOptions]="chartGithubIssues.plotOptions"
                        [series]="chartGithubIssues.series[githubIssuesWeekSelector.value]"
                        [states]="chartGithubIssues.states"
                        [stroke]="chartGithubIssues.stroke"
                        [tooltip]="chartGithubIssues.tooltip"
                        [xaxis]="chartGithubIssues.xaxis"
                        [yaxis]="chartGithubIssues.yaxis"
                      ></apx-chart>
                    </div>
                  </div>
                  <!-- Overview -->
                  <div class="flex flex-col">
                    <div class="text-secondary font-medium">Resumen general</div>
                    <div class="mt-6 grid flex-auto grid-cols-4 gap-4">
                      <!-- Nuevos problemas
 -->
                      <div
                        class="col-span-2 flex flex-col items-center justify-center rounded-2xl bg-indigo-50 px-1 py-8 text-indigo-800 dark:bg-white dark:bg-opacity-5 dark:text-indigo-400"
                      >
                        <div class="text-5xl font-semibold leading-none tracking-tight sm:text-7xl">
                          {{
                            data.githubIssues.overview[githubIssuesWeekSelector.value]['new-issues']
                          }}
                        </div>
                        <div class="mt-1 text-sm font-medium sm:text-lg">Nuevos problemas</div>
                      </div>
                      <!-- Cerrado
 -->
                      <div
                        class="col-span-2 flex flex-col items-center justify-center rounded-2xl bg-green-50 px-1 py-8 text-green-800 dark:bg-white dark:bg-opacity-5 dark:text-green-500"
                      >
                        <div class="text-5xl font-semibold leading-none tracking-tight sm:text-7xl">
                          {{
                            data.githubIssues.overview[githubIssuesWeekSelector.value][
                              'closed-issues'
                            ]
                          }}
                        </div>
                        <div class="mt-1 text-sm font-medium sm:text-lg">Cerrado</div>
                      </div>
                      <!-- Fixed -->
                      <div
                        class="text-secondary col-span-2 flex flex-col items-center justify-center rounded-2xl bg-gray-100 px-1 py-8 sm:col-span-1 dark:bg-white dark:bg-opacity-5"
                      >
                        <div class="text-5xl font-semibold leading-none tracking-tight">
                          {{ data.githubIssues.overview[githubIssuesWeekSelector.value]['fixed'] }}
                        </div>
                        <div class="mt-1 text-center text-sm font-medium">Corregido</div>
                      </div>
                      <!-- Won't fix -->
                      <div
                        class="text-secondary col-span-2 flex flex-col items-center justify-center rounded-2xl bg-gray-100 px-1 py-8 sm:col-span-1 dark:bg-white dark:bg-opacity-5"
                      >
                        <div class="text-5xl font-semibold leading-none tracking-tight">
                          {{
                            data.githubIssues.overview[githubIssuesWeekSelector.value]['wont-fix']
                          }}
                        </div>
                        <div class="mt-1 text-center text-sm font-medium">No se corregir√°</div>
                      </div>
                      <!-- Reabierto -->
                      <div
                        class="text-secondary col-span-2 flex flex-col items-center justify-center rounded-2xl bg-gray-100 px-1 py-8 sm:col-span-1 dark:bg-white dark:bg-opacity-5"
                      >
                        <div class="text-5xl font-semibold leading-none tracking-tight">
                          {{
                            data.githubIssues.overview[githubIssuesWeekSelector.value]['re-opened']
                          }}
                        </div>
                        <div class="mt-1 text-center text-sm font-medium">Reabierto</div>
                      </div>
                      <!-- Evaluaci√≥n -->
                      <div
                        class="text-secondary col-span-2 flex flex-col items-center justify-center rounded-2xl bg-gray-100 px-1 py-8 sm:col-span-1 dark:bg-white dark:bg-opacity-5"
                      >
                        <div class="text-5xl font-semibold leading-none tracking-tight">
                          {{
                            data.githubIssues.overview[githubIssuesWeekSelector.value][
                              'needs-triage'
                            ]
                          }}
                        </div>
                        <div class="mt-1 text-center text-sm font-medium">Evaluaci√≥n</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Distribuci√≥n de tareas -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow sm:col-span-2 md:col-span-4 lg:col-span-2"
              >
                <div class="flex flex-col items-start justify-between sm:flex-row">
                  <div class="truncate text-lg font-medium leading-6 tracking-tight">
                    Distribuci√≥n de tareas
                  </div>
                  <div class="mt-3 sm:ml-2 sm:mt-0">
                    <mat-button-toggle-group
                      value="this-week"
                      #taskDistributionWeekSelector="matButtonToggleGroup"
                    >
                      <mat-button-toggle value="last-week">Semana pasada</mat-button-toggle>
                      <mat-button-toggle value="this-week">Esta semana</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                </div>
                <div class="mt-6 flex flex-auto flex-col">
                  <apx-chart
                    class="h-80 w-full flex-auto"
                    [chart]="chartTaskDistribution.chart"
                    [labels]="chartTaskDistribution.labels"
                    [legend]="chartTaskDistribution.legend"
                    [plotOptions]="chartTaskDistribution.plotOptions"
                    [series]="chartTaskDistribution.series[taskDistributionWeekSelector.value]"
                    [states]="chartTaskDistribution.states"
                    [stroke]="chartTaskDistribution.stroke"
                    [theme]="chartTaskDistribution.theme"
                    [tooltip]="chartTaskDistribution.tooltip"
                    [yaxis]="chartTaskDistribution.yaxis"
                  ></apx-chart>
                </div>
                <div
                  class="-m-6 mt-4 grid grid-cols-2 divide-x border-t bg-gray-50 dark:bg-transparent"
                >
                  <div class="flex flex-col items-center justify-center p-6 sm:p-8">
                    <div class="text-5xl font-semibold leading-none tracking-tighter">
                      {{
                        data.taskDistribution.overview[taskDistributionWeekSelector.value]['new']
                      }}
                    </div>
                    <div class="text-secondary mt-1 text-center">Nuevas tareas</div>
                  </div>
                  <div class="flex flex-col items-center justify-center p-6 sm:p-8">
                    <div class="text-5xl font-semibold leading-none tracking-tighter">
                      {{
                        data.taskDistribution.overview[taskDistributionWeekSelector.value][
                          'completed'
                        ]
                      }}
                    </div>
                    <div class="text-secondary mt-1 text-center">Tareas completadas</div>
                  </div>
                </div>
              </div>
              <!-- Schedule -->
              <div
                class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl p-6 shadow sm:col-span-2 md:col-span-4 lg:col-span-2"
              >
                <div class="flex flex-col items-start justify-between sm:flex-row">
                  <div class="truncate text-lg font-medium leading-6 tracking-tight">Horario</div>
                  <div class="mt-3 sm:ml-2 sm:mt-0">
                    <mat-button-toggle-group
                      value="today"
                      #scheduleDaySelector="matButtonToggleGroup"
                    >
                      <mat-button-toggle value="today">Hoy</mat-button-toggle>
                      <mat-button-toggle value="tomorrow">Ma√±ana</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                </div>
                <div class="mt-2 flex flex-col divide-y">
                  @for (
                    scheduleItem of data.schedule[scheduleDaySelector.value];
                    track trackByFn($index, scheduleItem)
                  ) {
                    <div class="flex flex-row items-center justify-between px-0.5 py-4">
                      <div class="flex flex-col">
                        <div class="font-medium">
                          {{ scheduleItem.title }}
                        </div>
                        <div
                          class="-ml-0.5 mt-2 flex flex-col space-y-1 sm:mt-1 sm:flex-row sm:items-center sm:space-x-3 sm:space-y-0"
                        >
                          @if (scheduleItem.time) {
                            <div class="flex items-center">
                              <mat-icon
                                class="text-hint icon-size-5"
                                [svgIcon]="'heroicons_outline:clock'"
                              ></mat-icon>
                              <div class="text-secondary ml-1.5 text-md">
                                {{ scheduleItem.time }}
                              </div>
                            </div>
                          }
                          @if (scheduleItem.location) {
                            <div class="flex items-center">
                              <mat-icon
                                class="text-hint icon-size-5"
                                [svgIcon]="'heroicons_outline:map-pin'"
                              ></mat-icon>
                              <div class="text-secondary ml-1.5 text-md">
                                {{ scheduleItem.location }}
                              </div>
                            </div>
                          }
                        </div>
                      </div>
                      <button mat-icon-button>
                        <mat-icon [svgIcon]="'heroicons_mini:chevron-right'"></mat-icon>
                      </button>
                    </div>
                  }
                </div>
              </div>
            </div>
          </ng-template>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>

  <!-- SU ADMIN / JEFE -->
  <div class="-mt-px mb-5 flex-auto border-t pt-4 sm:pt-6" *ngIf="isJefeOrSuadmin">
    <div class="mx-auto w-full max-w-screen-xl px-6 sm:px-8">
      <!-- Header Ejecutivo -->
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Panel de Control</h2>
        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Vista general del sistema</p>
      </div>

      <!-- KPIs Principales -->
      <div class="mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
        <!-- Card 1 -->
        <div
          class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
        >
          <div class="mb-4 flex items-center justify-between">
            <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
              <mat-icon
                class="text-gray-600 dark:text-gray-400"
                svgIcon="heroicons_outline:users"
              ></mat-icon>
            </div>
          </div>
          <div class="flex flex-col">
            <p class="mb-1 text-sm text-gray-500 dark:text-gray-400">Colaboradores</p>
            <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">‚Äî</p>
          </div>
        </div>

        <!-- Card 2 -->
        <div
          class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
        >
          <div class="mb-4 flex items-center justify-between">
            <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
              <mat-icon
                class="text-gray-600 dark:text-gray-400"
                svgIcon="heroicons_outline:chart-bar"
              ></mat-icon>
            </div>
          </div>
          <div class="flex flex-col">
            <p class="mb-1 text-sm text-gray-500 dark:text-gray-400">Actividad</p>
            <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">‚Äî</p>
          </div>
        </div>

        <!-- Card 3 -->
        <div
          class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
        >
          <div class="mb-4 flex items-center justify-between">
            <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
              <mat-icon
                class="text-gray-600 dark:text-gray-400"
                svgIcon="heroicons_outline:check-circle"
              ></mat-icon>
            </div>
          </div>
          <div class="flex flex-col">
            <p class="mb-1 text-sm text-gray-500 dark:text-gray-400">Estado</p>
            <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">‚Äî</p>
          </div>
        </div>

        <!-- Card 4 -->
        <div
          class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
        >
          <div class="mb-4 flex items-center justify-between">
            <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
              <mat-icon
                class="text-gray-600 dark:text-gray-400"
                svgIcon="heroicons_outline:document-text"
              ></mat-icon>
            </div>
          </div>
          <div class="flex flex-col">
            <p class="mb-1 text-sm text-gray-500 dark:text-gray-400">Pendientes</p>
            <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">‚Äî</p>
          </div>
        </div>
      </div>

      <!-- Secci√≥n Central -->
      <div class="mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2">
        <!-- Gr√°fico Placeholder -->
        <div class="bg-card rounded-2xl border border-gray-100 p-6 shadow dark:border-gray-800">
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
              Informaci√≥n General
            </h3>
            <p class="text-sm text-gray-500 dark:text-gray-400">Resumen del sistema</p>
          </div>

          <div
            class="flex h-64 items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 dark:border-gray-700 dark:bg-gray-900"
          >
            <div class="text-center">
              <mat-icon
                class="mb-4 text-gray-400 icon-size-16"
                svgIcon="heroicons_outline:chart-bar"
              ></mat-icon>
              <p class="text-sm text-gray-500 dark:text-gray-400">Sin datos disponibles</p>
            </div>
          </div>
        </div>

        <!-- M√©tricas Placeholder -->
        <div class="bg-card rounded-2xl border border-gray-100 p-6 shadow dark:border-gray-800">
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">M√©tricas</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400">Indicadores principales</p>
          </div>

          <div class="space-y-6">
            <!-- M√©trica 1 -->
            <div>
              <div class="mb-2 flex items-center justify-between">
                <span class="text-sm text-gray-700 dark:text-gray-300">Categor√≠a A</span>
                <span class="text-sm font-medium text-gray-900 dark:text-gray-100">‚Äî</span>
              </div>
              <div class="h-2 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800">
                <div class="h-full bg-gray-300 dark:bg-gray-700" style="width: 0%"></div>
              </div>
            </div>

            <!-- M√©trica 2 -->
            <div>
              <div class="mb-2 flex items-center justify-between">
                <span class="text-sm text-gray-700 dark:text-gray-300">Categor√≠a B</span>
                <span class="text-sm font-medium text-gray-900 dark:text-gray-100">‚Äî</span>
              </div>
              <div class="h-2 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800">
                <div class="h-full bg-gray-300 dark:bg-gray-700" style="width: 0%"></div>
              </div>
            </div>

            <!-- M√©trica 3 -->
            <div>
              <div class="mb-2 flex items-center justify-between">
                <span class="text-sm text-gray-700 dark:text-gray-300">Categor√≠a C</span>
                <span class="text-sm font-medium text-gray-900 dark:text-gray-100">‚Äî</span>
              </div>
              <div class="h-2 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800">
                <div class="h-full bg-gray-300 dark:bg-gray-700" style="width: 0%"></div>
              </div>
            </div>

            <!-- M√©trica 4 -->
            <div>
              <div class="mb-2 flex items-center justify-between">
                <span class="text-sm text-gray-700 dark:text-gray-300">Categor√≠a D</span>
                <span class="text-sm font-medium text-gray-900 dark:text-gray-100">‚Äî</span>
              </div>
              <div class="h-2 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800">
                <div class="h-full bg-gray-300 dark:bg-gray-700" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Acciones y Notificaciones -->
      <div class="grid grid-cols-1 gap-6 lg:grid-cols-3">
        <!-- Acciones R√°pidas -->
        <div
          class="bg-card rounded-2xl border border-gray-100 p-6 shadow lg:col-span-2 dark:border-gray-800"
        >
          <h3 class="mb-4 text-lg font-semibold text-gray-900 dark:text-gray-100">
            Acciones R√°pidas
          </h3>
          <div class="grid grid-cols-2 gap-4">
            <button mat-stroked-button class="flex h-20 items-center justify-start px-4">
              <div class="flex items-center">
                <div class="mr-3 rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 icon-size-5 dark:text-gray-400"
                    svgIcon="heroicons_outline:user-group"
                  ></mat-icon>
                </div>
                <div class="text-left">
                  <div class="text-sm font-medium text-gray-900 dark:text-gray-100">Gesti√≥n</div>
                  <div class="text-xs text-gray-500">Ver informaci√≥n</div>
                </div>
              </div>
            </button>

            <button mat-stroked-button class="flex h-20 items-center justify-start px-4">
              <div class="flex items-center">
                <div class="mr-3 rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 icon-size-5 dark:text-gray-400"
                    svgIcon="heroicons_outline:clipboard-document-check"
                  ></mat-icon>
                </div>
                <div class="text-left">
                  <div class="text-sm font-medium text-gray-900 dark:text-gray-100">Revisi√≥n</div>
                  <div class="text-xs text-gray-500">Pendientes</div>
                </div>
              </div>
            </button>

            <button mat-stroked-button class="flex h-20 items-center justify-start px-4">
              <div class="flex items-center">
                <div class="mr-3 rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 icon-size-5 dark:text-gray-400"
                    svgIcon="heroicons_outline:chart-pie"
                  ></mat-icon>
                </div>
                <div class="text-left">
                  <div class="text-sm font-medium text-gray-900 dark:text-gray-100">Reportes</div>
                  <div class="text-xs text-gray-500">Ver an√°lisis</div>
                </div>
              </div>
            </button>

            <button mat-stroked-button class="flex h-20 items-center justify-start px-4">
              <div class="flex items-center">
                <div class="mr-3 rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 icon-size-5 dark:text-gray-400"
                    svgIcon="heroicons_outline:cog-6-tooth"
                  ></mat-icon>
                </div>
                <div class="text-left">
                  <div class="text-sm font-medium text-gray-900 dark:text-gray-100">
                    Configuraci√≥n
                  </div>
                  <div class="text-xs text-gray-500">Ajustes</div>
                </div>
              </div>
            </button>
          </div>
        </div>

        <!-- Notificaciones -->
        <div class="bg-card rounded-2xl border border-gray-100 p-6 shadow dark:border-gray-800">
          <h3 class="mb-4 text-lg font-semibold text-gray-900 dark:text-gray-100">
            Notificaciones
          </h3>
          <div class="flex h-48 items-center justify-center">
            <div class="text-center">
              <mat-icon
                class="mb-2 text-gray-300 icon-size-12 dark:text-gray-700"
                svgIcon="heroicons_outline:bell"
              ></mat-icon>
              <p class="text-sm text-gray-500 dark:text-gray-400">Sin notificaciones</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CLIENTES -->

<div class="-mt-px mb-5 flex-auto border-t pt-4 sm:pt-6" *ngIf="isCliente">
  <div class="mx-auto w-full max-w-screen-xl px-6 sm:px-8">
    <!-- Header -->
    <div class="mb-8">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Control de estado</h2>
      <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Vista general y administraci√≥n</p>
    </div>

    <!-- Tabs -->
    <mat-tab-group class="sm:px-2" mat-stretch-tabs="false" [animationDuration]="'0'">
      <!-- ============================ -->
      <!-- TAB: RESUMEN                 -->
      <!-- ============================ -->
      <mat-tab label="Resumen">
        <ng-template matTabContent>
          <!-- KPI Cards - Versi√≥n sobria -->
          <div class="mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
            <!-- Saldo Actual -->
            <div
              class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
            >
              <div class="mb-4 flex items-center justify-between">
                <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 dark:text-gray-400"
                    svgIcon="heroicons_outline:currency-dollar"
                  ></mat-icon>
                </div>
                <span class="text-xs text-gray-500 dark:text-gray-400">Actualizado</span>
              </div>
              <div class="flex flex-col">
                <p class="mb-1 text-xs font-medium text-gray-500 dark:text-gray-400">
                  Saldo Total
                </p>
                <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">
                  ${{ saldoActual | number: '1.2-2' }}
                </p>
              </div>
            </div>

            <!-- Cr√©dito Disponible -->
            <div
              class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
            >
              <div class="mb-4 flex items-center justify-between">
                <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 dark:text-gray-400"
                    svgIcon="heroicons_outline:credit-card"
                  ></mat-icon>
                </div>
                <span class="text-xs text-gray-500 dark:text-gray-400">Disponible</span>
              </div>
              <div class="flex flex-col">
                <p class="mb-1 text-xs font-medium text-gray-500 dark:text-gray-400">Cr√©dito</p>
                <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">
                  ${{ creditoDisponible | number: '1.2-2' }}
                </p>
                <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                  de ${{ limiteCredito | number: '1.2-2' }}
                </p>
              </div>
            </div>

            <!-- Pedidos del Mes -->
            <div
              class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
            >
              <div class="mb-4 flex items-center justify-between">
                <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 dark:text-gray-400"
                    svgIcon="heroicons_outline:shopping-bag"
                  ></mat-icon>
                </div>
                <span class="text-xs text-gray-500 dark:text-gray-400">Este mes</span>
              </div>
              <div class="flex flex-col">
                <p class="mb-1 text-xs font-medium text-gray-500 dark:text-gray-400">Pedidos</p>
                <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">
                  {{ pedidosMes }}
                </p>
                <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                  +{{ incrementoPedidos }}% vs anterior
                </p>
              </div>
            </div>

            <!-- √ìrdenes Pendientes -->
            <div
              class="bg-card rounded-2xl border border-gray-100 p-6 shadow transition-shadow hover:shadow-md dark:border-gray-800"
            >
              <div class="mb-4 flex items-center justify-between">
                <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 dark:text-gray-400"
                    svgIcon="heroicons_outline:clock"
                  ></mat-icon>
                </div>
                <span class="text-xs text-gray-500 dark:text-gray-400">En proceso</span>
              </div>
              <div class="flex flex-col">
                <p class="mb-1 text-xs font-medium text-gray-500 dark:text-gray-400">Pendientes</p>
                <p class="text-3xl font-bold text-gray-900 dark:text-gray-100">
                  {{ ordenesPendientes }}
                </p>
              </div>
            </div>
          </div>

          <!-- Secci√≥n Central -->
          <div class="mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2">
            <!-- Estado de Cuenta -->
            <div class="bg-card rounded-2xl border border-gray-100 p-6 shadow dark:border-gray-800">
              <div class="mb-6">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                  Estado de Cuenta
                </h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">Resumen actual</p>
              </div>

              <div class="space-y-4">
                <!-- Saldo Anterior -->
                <div class="flex items-center justify-between border-b pb-3 dark:border-gray-700">
                  <span class="text-sm text-gray-600 dark:text-gray-400">Saldo Anterior</span>
                  <span class="font-mono text-sm font-semibold text-gray-900 dark:text-gray-100">
                    ${{ saldoAnterior | number: '1.2-2' }}
                  </span>
                </div>

                <!-- Cargos del Mes -->
                <div class="flex items-center justify-between border-b pb-3 dark:border-gray-700">
                  <span class="text-sm text-gray-600 dark:text-gray-400">Cargos</span>
                  <span class="font-mono text-sm font-semibold text-red-600 dark:text-red-400">
                    -${{ cargosMes | number: '1.2-2' }}
                  </span>
                </div>

                <!-- Pagos Realizados -->
                <div class="flex items-center justify-between border-b pb-3 dark:border-gray-700">
                  <span class="text-sm text-gray-600 dark:text-gray-400">Pagos</span>
                  <span class="font-mono text-sm font-semibold text-green-600 dark:text-green-400">
                    +${{ pagosRealizados | number: '1.2-2' }}
                  </span>
                </div>

                <!-- Saldo Final -->
                <div
                  class="flex items-center justify-between rounded-lg bg-gray-100 p-4 dark:bg-gray-800"
                >
                  <span class="text-sm font-bold text-gray-900 dark:text-gray-100"
                    >Saldo Actual</span
                  >
                  <span class="font-mono text-lg font-bold text-gray-900 dark:text-gray-100">
                    ${{ saldoActual | number: '1.2-2' }}
                  </span>
                </div>

                <!-- Fecha de corte -->
                <div class="mt-4 text-center">
                  <span class="text-xs text-gray-500 dark:text-gray-400">
                    Corte: {{ fechaCorte }}
                  </span>
                </div>
              </div>
            </div>

            <!-- Actividad Reciente -->
            <div class="bg-card rounded-2xl border border-gray-100 p-6 shadow dark:border-gray-800">
              <div class="mb-6 flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                    Actividad Reciente
                  </h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400">√öltimos movimientos</p>
                </div>
                <button mat-button>Ver todo</button>
              </div>

              <div class="space-y-4">
                <!-- Item 1 -->
                <div class="flex items-center justify-between border-b pb-4 dark:border-gray-700">
                  <div class="flex items-center gap-3">
                    <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                      <mat-icon
                        class="text-gray-600 icon-size-5 dark:text-gray-400"
                        svgIcon="heroicons_outline:shopping-bag"
                      ></mat-icon>
                    </div>
                    <div>
                      <p class="text-sm font-medium text-gray-900 dark:text-gray-100">
                        Pedido #12345
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400">Hace 2 horas</p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="font-mono text-sm font-semibold text-gray-900 dark:text-gray-100">
                      $1,250.00
                    </p>
                    <span class="text-xs text-gray-500 dark:text-gray-400">Completado</span>
                  </div>
                </div>

                <!-- Item 2 -->
                <div class="flex items-center justify-between border-b pb-4 dark:border-gray-700">
                  <div class="flex items-center gap-3">
                    <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                      <mat-icon
                        class="text-gray-600 icon-size-5 dark:text-gray-400"
                        svgIcon="heroicons_outline:banknotes"
                      ></mat-icon>
                    </div>
                    <div>
                      <p class="text-sm font-medium text-gray-900 dark:text-gray-100">
                        Pago recibido
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400">Hace 1 d√≠a</p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="font-mono text-sm font-semibold text-green-600 dark:text-green-400">
                      +$5,000.00
                    </p>
                    <span class="text-xs text-gray-500 dark:text-gray-400">Aplicado</span>
                  </div>
                </div>

                <!-- Item 3 -->
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <div class="rounded-lg bg-gray-100 p-2 dark:bg-gray-800">
                      <mat-icon
                        class="text-gray-600 icon-size-5 dark:text-gray-400"
                        svgIcon="heroicons_outline:truck"
                      ></mat-icon>
                    </div>
                    <div>
                      <p class="text-sm font-medium text-gray-900 dark:text-gray-100">
                        Pedido #12344
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400">Hace 3 d√≠as</p>
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="font-mono text-sm font-semibold text-gray-900 dark:text-gray-100">
                      $2,340.50
                    </p>
                    <span class="text-xs text-gray-500 dark:text-gray-400">En tr√°nsito</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </mat-tab>

      <!-- ============================ -->
      <!-- TAB: ESTADOS DE CUENTA       -->
      <!-- ============================ -->
      <mat-tab label="Estados de cuenta">
        <ng-template matTabContent>
          <div class="mb-6 flex items-center justify-between">
            <div>
              <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100">
                Estados de cuenta
              </h2>
              <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                Historial de estados de cuenta
              </p>
            </div>
            <button mat-stroked-button>
              <mat-icon class="mr-2" svgIcon="heroicons_outline:arrow-down-tray"></mat-icon>
              Descargar
            </button>
          </div>

          <!-- Tabla de Estados -->
          <div class="bg-card overflow-hidden rounded-2xl border border-gray-100 dark:border-gray-800">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
              <thead class="bg-gray-50 dark:bg-gray-900">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"
                  >
                    Periodo
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"
                  >
                    Fecha Corte
                  </th>
                  <th
                    class="px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"
                  >
                    Monto
                  </th>
                  <th
                    class="px-6 py-3 text-center text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"
                  >
                    Estado
                  </th>
                  <th
                    class="px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"
                  >
                    Acciones
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800">
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                  <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-900 dark:text-gray-100">
                    Enero 2025
                  </td>
                  <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    31/01/2025
                  </td>
                  <td
                    class="whitespace-nowrap px-6 py-4 text-right font-mono text-sm font-semibold text-gray-900 dark:text-gray-100"
                  >
                    $15,780.50
                  </td>
                  <td class="whitespace-nowrap px-6 py-4 text-center">
                    <span
                      class="inline-flex rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-800 dark:bg-green-900/20 dark:text-green-400"
                    >
                      Pagado
                    </span>
                  </td>
                  <td class="whitespace-nowrap px-6 py-4 text-right text-sm">
                    <button mat-icon-button matTooltip="Ver">
                      <mat-icon svgIcon="heroicons_outline:eye"></mat-icon>
                    </button>
                    <button mat-icon-button matTooltip="Descargar">
                      <mat-icon svgIcon="heroicons_outline:arrow-down-tray"></mat-icon>
                    </button>
                  </td>
                </tr>
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                  <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-900 dark:text-gray-100">
                    Diciembre 2024
                  </td>
                  <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                    31/12/2024
                  </td>
                  <td
                    class="whitespace-nowrap px-6 py-4 text-right font-mono text-sm font-semibold text-gray-900 dark:text-gray-100"
                  >
                    $22,450.00
                  </td>
                  <td class="whitespace-nowrap px-6 py-4 text-center">
                    <span
                      class="inline-flex rounded-full bg-gray-100 px-2 py-1 text-xs font-semibold text-gray-800 dark:bg-gray-700 dark:text-gray-300"
                    >
                      Pendiente
                    </span>
                  </td>
                  <td class="whitespace-nowrap px-6 py-4 text-right text-sm">
                    <button mat-icon-button matTooltip="Ver">
                      <mat-icon svgIcon="heroicons_outline:eye"></mat-icon>
                    </button>
                    <button mat-icon-button matTooltip="Descargar">
                      <mat-icon svgIcon="heroicons_outline:arrow-down-tray"></mat-icon>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ng-template>
      </mat-tab>

      <!-- ============================ -->
      <!-- TAB: PEDIDOS                 -->
      <!-- ============================ -->
      <mat-tab label="Pedidos">
        <ng-template matTabContent>
          <div class="mb-6 flex items-center justify-between">
            <div>
              <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Pedidos</h2>
              <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">Gesti√≥n de pedidos</p>
            </div>
            <button mat-raised-button color="primary">
              <mat-icon class="mr-2" svgIcon="heroicons_outline:plus"></mat-icon>
              Nuevo Pedido
            </button>
          </div>

          <!-- Lista de Pedidos -->
          <div class="space-y-4">
            <!-- Pedido 1 -->
            <div
              class="bg-card flex items-center justify-between rounded-xl border border-gray-100 p-6 hover:shadow-md dark:border-gray-800"
            >
              <div class="flex items-center gap-4">
                <div class="rounded-lg bg-gray-100 p-3 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 icon-size-6 dark:text-gray-400"
                    svgIcon="heroicons_outline:shopping-bag"
                  ></mat-icon>
                </div>
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                    Pedido #PED-2025-001
                  </h3>
                  <div class="mt-1 flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                    <span>15 Ene 2025</span>
                    <span>‚Ä¢</span>
                    <span>Entrega: 20 Ene 2025</span>
                  </div>
                </div>
              </div>
              <div class="flex items-center gap-6">
                <div class="text-right">
                  <p class="text-xs text-gray-500 dark:text-gray-400">Total</p>
                  <p class="font-mono text-xl font-bold text-gray-900 dark:text-gray-100">
                    $4,580.00
                  </p>
                </div>
                <span
                  class="rounded-full bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"
                >
                  En tr√°nsito
                </span>
                <button mat-icon-button>
                  <mat-icon svgIcon="heroicons_outline:chevron-right"></mat-icon>
                </button>
              </div>
            </div>

            <!-- Pedido 2 -->
            <div
              class="bg-card flex items-center justify-between rounded-xl border border-gray-100 p-6 hover:shadow-md dark:border-gray-800"
            >
              <div class="flex items-center gap-4">
                <div class="rounded-lg bg-gray-100 p-3 dark:bg-gray-800">
                  <mat-icon
                    class="text-gray-600 icon-size-6 dark:text-gray-400"
                    svgIcon="heroicons_outline:shopping-bag"
                  ></mat-icon>
                </div>
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
                    Pedido #PED-2024-125
                  </h3>
                  <div class="mt-1 flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                    <span>05 Ene 2025</span>
                    <span>‚Ä¢</span>
                    <span>Entregado: 08 Ene 2025</span>
                  </div>
                </div>
              </div>
              <div class="flex items-center gap-6">
                <div class="text-right">
                  <p class="text-xs text-gray-500 dark:text-gray-400">Total</p>
                  <p class="font-mono text-xl font-bold text-gray-900 dark:text-gray-100">
                    $8,340.50
                  </p>
                </div>
                <span
                  class="rounded-full bg-green-100 px-3 py-1 text-xs font-semibold text-green-800 dark:bg-green-900/20 dark:text-green-400"
                >
                  Entregado
                </span>
                <button mat-icon-button>
                  <mat-icon svgIcon="heroicons_outline:chevron-right"></mat-icon>
                </button>
              </div>
            </div>
          </div>
        </ng-template>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

</div>
