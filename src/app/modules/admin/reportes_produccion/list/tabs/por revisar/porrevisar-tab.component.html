<!-- Cards de resumen -->
<div class="px-4 py-3 md:px-8 md:py-4 mt-3">
    <!-- Vista móvil -->
    <div class="md:hidden">
        <div class="bg-card shadow-sm rounded-lg px-4 py-2 border-l-4 border-amber-500">
            <div class="flex items-center justify-between">
                <div>
                    <div class="text-sm font-medium text-secondary mb-1">Total Por Revisar
                    </div>
                    <div class="text-2xl font-bold">{{ calcularTotalPesoPorRevisar() |
                        number:'1.0-0' }}</div>
                    <div class="text-xs text-secondary mt-1">kilogramos</div>
                </div>
                <mat-icon class="text-amber-500 icon-size-8" [svgIcon]="'heroicons_solid:x-circle'"></mat-icon>
            </div>
        </div>
    </div>

    <!-- Vista desktop -->
    <div class="hidden md:grid grid-cols-3 gap-3">
        <div class="bg-card shadow-sm rounded-xl p-4 border-l-4 border-amber-500">
            <div class="flex items-center justify-between mb-1">
                <div class="text-sm font-medium text-secondary">Total Por Revisar</div>
                <mat-icon class="text-amber-500 icon-size-5" [svgIcon]="'heroicons_solid:scale'"></mat-icon>
            </div>
            <div class="text-2xl font-bold">{{ calcularTotalPesoPorRevisar() |
                number:'1.0-0' }}</div>
            <div class="text-xs text-secondary">kilogramos</div>
        </div>

        <div class="bg-card shadow-sm rounded-xl p-4 border-l-4 border-blue-500">
            <div class="flex items-center justify-between mb-1">
                <div class="text-sm font-medium text-secondary">Total Artículos</div>
                <mat-icon class="text-blue-500 icon-size-5" [svgIcon]="'heroicons_solid:cube'"></mat-icon>
            </div>
            <div class="text-2xl font-bold">{{ contarArticulosPorRevisar() }}</div>
            <div class="text-xs text-secondary">artículos pendientes</div>
        </div>

        <div class="bg-card shadow-sm rounded-xl p-4 border-l-4 border-purple-500">
            <div class="flex items-center justify-between mb-1">
                <div class="text-sm font-medium text-secondary">Total Piezas</div>
                <mat-icon class="text-purple-500 icon-size-5" [svgIcon]="'heroicons_solid:chart-bar'"></mat-icon>
            </div>
            <div class="text-2xl font-bold">{{ calcularTotalPiezasPorRevisar() |
                number:'1.0-0' }}</div>
            <div class="text-xs text-secondary">piezas pendientes</div>
        </div>
    </div>
</div>

<!-- Tabla de datos -->
<div class="mt-6 overflow-x-auto px-4 md:px-8">
    <div *ngIf="isLoadingPorRevisar" class="p-8 text-center">
        <mat-spinner diameter="40" class="mx-auto"></mat-spinner>
        <p class="mt-4 text-secondary">Cargando datos por revisar...</p>
    </div>

    <table *ngIf="!isLoadingPorRevisar && datosPorRevisarFiltrados.length > 0"
        class="w-full bg-card shadow-sm rounded-2xl overflow-hidden">
        <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
                <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider">
                    Artículo
                </th>
                <th class="px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider">
                    Piezas
                </th>
                <th class="px-6 py-4 text-right text-xs font-semibold uppercase tracking-wider">
                    Peso Por Revisar (kg)
                </th>
            </tr>
        </thead>
        <tbody class="divide-y">
            <tr *ngFor="let item of datosPorRevisarFiltrados"
                class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                <td class="px-6 py-4">
                    <div class="flex items-center gap-3">
                        <mat-icon class="icon-size-5 text-amber-500" [svgIcon]="'heroicons_solid:x-circle'"></mat-icon>
                        <span class="font-medium">{{ item.ARTICULO }}</span>
                    </div>
                </td>
                <td class="px-6 py-4 text-right">
                    <span class="font-medium">{{ item.PIEZAS | number:'1.0-0' }}</span>
                </td>
                <td class="px-6 py-4 text-right">
                    <span class="font-semibold text-amber-600 dark:text-amber-400">
                        {{ item.TOTAL_POR_REVISAR | number:'1.2-2' }}
                    </span>
                </td>
            </tr>
        </tbody>
        <tfoot class="bg-gray-50 dark:bg-gray-800 font-bold border-t-2">
            <tr>
                <td class="px-6 py-4 uppercase text-sm">Total:</td>
                <td class="px-6 py-4 text-right">
                    <span class="text-lg text-purple-600 dark:text-purple-400">
                        {{ calcularTotalPiezasPorRevisar() | number:'1.0-0' }}
                    </span>
                </td>
                <td class="px-6 py-4 text-right">
                    <span class="text-lg text-amber-600 dark:text-amber-400">
                        {{ calcularTotalPesoPorRevisar() | number:'1.2-2' }}
                    </span>
                </td>
            </tr>
        </tfoot>
    </table>

    <div *ngIf="!isLoadingPorRevisar && datosPorRevisarFiltrados.length === 0" class="p-8 text-center text-secondary">
        <mat-icon class="icon-size-16 mb-4" [svgIcon]="'heroicons_outline:x-circle'"></mat-icon>
        <p class="text-lg font-medium mb-2">Sin datos por revisar</p>
        <p class="text-sm">No hay artículos pendientes de revisión</p>
    </div>
</div>